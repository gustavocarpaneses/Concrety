"use strict";app.controller("materiaisController",function(n,t,i,r,u,f,e){function l(){var t=[{command:["edit"],title:"Ações"},{field:"idFichaVerificacaoMaterial",title:"Material",values:n.fichas},{field:"dataFicha",title:"Data",format:"{0:dd/MM/yyyy}"},{field:"idFornecedor",title:"Fornecedor",values:n.fornecedores},{field:"aprovado",title:"Aprovado",template:'<input type="checkbox" #= aprovado ? "checked=checked" : "" # disabled="disabled" ><\/input>'}],i=kendo.data.Model.define({id:"id",fields:{id:{type:"number",defaultValue:0},dataFicha:{type:"date",defaultValue:new Date},aprovado:{type:"boolean"},idFichaVerificacaoMaterial:{type:"number"},idFornecedor:{type:"number"}}}),r=new kendo.data.DataSource({type:"json",transport:{read:function(t){f.obterDaUnidade(n.unidadeSelecionada).then(function(n){t.success(n.data)})},update:function(n){h(n.data.models[0]);f.update(n.data.models[0]).then(function(t){o();n.success(t.data)},function(n){c(n.data)})},create:function(t){h(t.data.models[0]);t.data.models[0].idUnidade=n.unidadeSelecionada;f.create(t.data.models[0]).then(function(n){o();t.success(n.data)},function(n){c(n.data)})}},batch:!0,pageSize:10,schema:{model:i}});n.materiaisGridOptions={dataSource:r,sortable:!0,pageable:{refresh:!0},filterable:{extra:!1},toolbar:["create"],columns:t,editable:{mode:"popup",template:kendo.template(angular.element("#editTemplate").html()),destroy:!1,window:{title:"Ficha de Verificação de Material",width:"800px",height:"600px"}}}}function h(n){isNaN(n.idFornecedor)&&(n.nomeNovoFornecedor=n.idFornecedor,n.idFornecedor=0)}function c(t){var u=[],r,i;for(r in t.modelState)for(i=0;i<t.modelState[r].length;i++)u.push(t.modelState[r][i]);n.mensagem=u.join(" ")}function a(t){f.obterDoNivel(t).then(function(t){angular.forEach(t.data,function(n){this.push({text:n.nomeCompleto,value:n.id})},n.fichas);n.dropDownFichasOptions={dataTextField:"text",dataValueField:"value",optionLabel:"Selecione...",dataSource:new kendo.data.DataSource({type:"json",transport:{read:function(t){t.success(n.fichas)}}})}})}function o(){e.get().then(function(t){n.fornecedores=[];angular.forEach(t.data,function(n){this.push({text:n.nome,value:n.id})},n.fornecedores);n.dropDownFornecedoresOptions={dataTextField:"text",dataValueField:"value",placeholder:"Selecione...",dataSource:new kendo.data.DataSource({type:"json",transport:{read:function(t){t.success(n.fornecedores)}}})}})}function v(t){u.obterNiveisAcima(t).then(function(t){n.niveis=t.data;angular.forEach(n.niveis,function(t,i){this.push({dataTextField:"nome",dataValueField:"id",cascadeFrom:i==0?"":"nivel"+(i-1),cascadeFromField:i==0?"":"idUnidadePai",optionLabel:i==n.niveis.length-1&&n.niveis.length>1?"Selecione...":"",dataSource:new kendo.data.DataSource({type:"json",transport:{read:function(n){r.obterDoNivel(t.id).then(function(t){n.success(t.data)})}}})})},n.dropDownNiveisOptions)})}var s=t.id;n.mensagem="";n.unidadeSelecionada="";n.niveis=[];n.dropDownNiveisOptions=[];n.fichas=[];n.dropDownFichasOptions=[];n.fornecedores=[];n.dropDownFornecedoresOptions=[];v(s);a(s);o();n.$watch("unidadeSelecionada",function(n){n&&l()})});
//# sourceMappingURL=materiaisController.min.js.map
