"use strict";app.controller("diarioObraController",function(n,t,i,r,u,f){function o(){var t=[{command:["edit"],title:"Ações"},{field:"dataDiario",title:"Data",format:"{0:dd/MM/yyyy}"},{field:"houveTrabalho",title:"Houve Trabalho?",template:'<input type="checkbox" #= houveTrabalho ? "checked=checked" : "" # disabled="disabled" ><\/input>'},{field:"temperaturaMinima",title:"Temp. Mínima"},{field:"temperaturaMaxima",title:"Temp. Máxima"},{field:"idCondicaoClimatica",title:"Condição Climática",values:n.condicoesClimaticas},{field:"efetivoTotal",title:"Efetivo Total",template:"#= efetivoTotal() #"}],i=kendo.data.Model.define({id:"id",fields:{id:{type:"number",defaultValue:0},dataDiario:{type:"date",defaultValue:new Date},houveTrabalho:{type:"boolean",defaultValue:!0},temperaturaMinima:{type:"number"},temperaturaMaxima:{type:"number"},idCondicaoClimatica:{type:"number"}},efetivoTotal:function(){return this.get("totalMontadores")+this.get("totalArmadores")+this.get("totalCarpinteiros")+this.get("totalEletricistas")+this.get("totalEncanadores")+this.get("totalEncarregados")+this.get("totalMestres")+this.get("totalAjudantes")+this.get("totalPedreiros")}}),u=new kendo.data.DataSource({type:"json",transport:{read:function(t){r.get(n.empreendimentoAtual.id).then(function(n){t.success(n.data)})},update:function(n){r.update(n.data.models[0]).then(function(t){n.success(t.data)},function(n){e(n.data)})},create:function(t){t.data.models[0].idEmpreendimento=n.empreendimentoAtual.id;r.create(t.data.models[0]).then(function(n){t.success(n.data)},function(n){e(n.data)})}},batch:!0,pageSize:10,schema:{model:i}});n.diariosObraGridOptions={dataSource:u,sortable:!0,pageable:{refresh:!0},filterable:{extra:!1},toolbar:["create"],columns:t,editable:{mode:"popup",template:kendo.template(angular.element("#editTemplate").html()),destroy:!1,window:{title:"Diário da Obra",width:"800px",height:"600px"}}}}function e(t){var u=[],r,i;for(r in t.modelState)for(i=0;i<t.modelState[r].length;i++)u.push(t.modelState[r][i]);n.mensagem=u.join(" ")}function s(){var i=t.defer();return u.get().then(function(t){angular.forEach(t.data,function(n){this.push({text:n.descricao,value:n.id})},n.condicoesClimaticas);n.dropDownCondicoesClimaticasOptions={dataTextField:"text",dataValueField:"value",optionLabel:"Selecione...",dataSource:new kendo.data.DataSource({type:"json",transport:{read:function(t){t.success(n.condicoesClimaticas)}}})};i.resolve()}),i.promise}n.mensagem="";n.empreendimentoAtual=f.empreendimentoAtual;n.condicoesClimaticas=[];n.dropDownCondicoesClimaticasOptions=[];n.optionsTemperatura={decimals:0,spinners:!1,min:-50,max:50,format:"#"};n.optionsHoras={decimals:0,spinners:!1,min:0,max:23,format:"#"};n.optionsTotais={decimals:0,spinners:!1,min:0,format:"#"};s().then(function(){o()})});
//# sourceMappingURL=diarioObraController.min.js.map
