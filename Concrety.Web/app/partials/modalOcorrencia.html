<div class="modal-header">
    <button type="button" class="close" ng-click="fechar()" aria-hidden="true">×</button>
    <h3 class="modal-title">Ocorrência</h3>
</div>
<div class="modal-body" style="height:auto;">
    <div class="k-edit-label">
        <label>Data Abertura</label>
    </div>
    <div class="k-edit-field">
        <input type="text"
               datepicker-popup
               ng-model="ocorrencia.dataAbertura"
               is-open="ocorrencia.dataAberturaOpened"
               ng-click="ocorrencia.dataAberturaOpened = true"
               class="input-md" /> 
    </div>
    <div class="k-edit-label">
        <label>Data Conclusão</label>
    </div>
    <div class="k-edit-field">
        <input type="text"
               datepicker-popup
               ng-model="ocorrencia.dataConclusao"
               is-open="ocorrencia.dataConclusaoOpened"
               ng-click="ocorrencia.dataConclusaoOpened = true"
               class="input-md" /> 
    </div>
    <div class="k-edit-label">
        <label>Status</label>
    </div>
    <div class="k-edit-field">
        <select kendo-drop-down-list required
                k-options="dropDownStatusOptions"
                ng-model="ocorrencia.status"
                style="width: auto"></select>
    </div>
    <div class="k-edit-label">
        <label>Patologia</label>
    </div>
    <div class="k-edit-field" ng-if="dropDownPatologiasOptions">
        <select kendo-drop-down-list required
                k-options="dropDownPatologiasOptions"
                ng-model="ocorrencia.idPatologia"
                style="width: 350px"></select> 
    </div>
    <div ng-if="ocorrencia.patologia">
        <div class="k-edit-label">
            <label>Solução</label>
        </div>
        <div class="k-edit-field">
            {{ocorrencia.patologia.solucoes[0].nome}} - {{ocorrencia.patologia.solucoes[0].descricao}}
            {{ocorrencia.patologia.solucoes[0].norma}}
        </div>
    </div>
    <div class="k-edit-label">
        <label>Descrição</label>
    </div>
    <div class="k-edit-field">
        <textarea kendo-editor style="width:500px;" ng-model="ocorrencia.descricao" k-encoded="false"></textarea>
    </div>
    <div>
        <div class="ocorrencias_imagem_evidencia">
            <h3><b>Fotos de evidências</b></h3>
        </div>

        <div style="height: 345px;" ng-hide="ocorrencia.anexos.length == 0">
            <carousel>
                <slide ng-repeat="item in ocorrencia.anexos" ng-if="!item.excluido">
                    <a href="{{item.anexo.urlPrimaria}}" data-lightbox="fotos"><img ng-src="{{item.anexo.urlPrimaria}}" style=" margin:auto;height:300px;"></a>
                </slide>
                <div class="carousel-caption">
                </div>
                <div class="btn_excluir_carousel">
                    <button class="btn btn-default" ng-click="excluirAnexo(item)">Excluir</button>
                </div>
            </carousel>
         
        </div>
        <div>
            <input class="input_foto_evidencia"
                   name="files"
                   type="file"
                   id="file"
                   kendo-upload
                   k-async="{ saveUrl: 'save', autoUpload: true }"
                   k-select="anexoSelecionado"
                   k-upload="uploadIniciado"
                   k-success="uploadConcluido"/>
        </div>
        <!--<input class="input_foto_evidencia" type="file" id="file" name="file" multiple onchange="angular.element(this).scope().anexoSelecionado(this)" />

        <table>
            <thead>
                <tr>
                    <th class="th_foto_preview">Preview</th>
                    <th class="th_foto_nome">Nome</th>
                    <th class="th_foto_tamanho">Tamanho</th>
                    <th class="th_foto_tipo">Tipo</th>
                    <th class="th_foto_acao">Ações</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="anexo in ocorrencia.anexos" ng-hide="anexo.excluido">
                    <td class="td_foto_preview"><a href="{{anexo.conteudoDataURL}}" target="_blank"><img ng-src="{{anexo.conteudoDataURL}}" height="100" /></a></td>
                    <td class="td_foto_nome">{{anexo.nome}}</td>
                    <td class="td_foto_tamanho">{{anexo.tamanhoFormatado}}</td>
                    <td class="td_foto_tipo">{{anexo.tipo}}</td>
                    <td class="td_foto_acao"><button class="btn btn-default" ng-click="excluirAnexo(anexo)">Excluir</button></td>
                </tr>
            </tbody>
        </table>-->
    </div>

    <div data-ng-hide="mensagem == ''" data-ng-class="(salvoComSucesso) ? 'alert alert-success' : 'alert alert-danger'">
        {{mensagem}}
    </div>
</div>
<div class="modal-footer">
    <button id="btn_salvar" class="btn btn-primary" ng-click="salvar()">Salvar</button>
    <button id="btn_fechar" class="btn" ng-click="fechar()">Fechar</button>
</div>